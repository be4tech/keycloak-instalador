{"ast":null,"code":"var _jsxFileName = \"/Users/user/NewoDev/keycloakify-starter/src/App/App.tsx\",\n  _s = $RefreshSig$();\nimport \"./App.css\";\nimport logo from \"./logo.svg\";\nimport myimg from \"./myimg.png\";\nimport { createOidcClientProvider, useOidcClient } from \"./oidc\";\nimport { addFooToQueryParams, addBarToQueryParams } from \"../keycloak-theme/login/valuesTransferredOverUrl\";\nimport jwt_decode from \"jwt-decode\";\nimport { addParamToUrl } from \"powerhooks/tools/urlSearchParams\";\n\n//On older Keycloak version you need the /auth (e.g: http://localhost:8080/auth)\n//On newer version you must remove it (e.g: http://localhost:8080 )\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst keycloakUrl = \"https://auth.code.gouv.fr/auth\";\nconst keycloakRealm = \"keycloakify\";\nconst keycloakClient = \"starter\";\nconst {\n  OidcClientProvider\n} = createOidcClientProvider({\n  url: keycloakUrl,\n  realm: keycloakRealm,\n  clientId: keycloakClient,\n  //This function will be called just before redirecting, \n  //it should return the current langue. \n  //kcContext.locale.currentLanguageTag will be what this function returned just before redirecting.  \n  getUiLocales: () => \"en\",\n  transformUrlBeforeRedirect: url => [url]\n  //Instead of foo and bar you could have isDark for example or any other state that you wish to \n  //transfer from the main app to the login pages.\n  .map(url => addFooToQueryParams({\n    url,\n    value: {\n      foo: 42\n    }\n  })).map(url => addBarToQueryParams({\n    url,\n    value: \"value of bar transferred to login page\"\n  }))[0],\n  log: console.log\n});\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(OidcClientProvider, {\n    children: /*#__PURE__*/_jsxDEV(ContextualizedApp, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this);\n}\n_c = App;\nfunction ContextualizedApp() {\n  _s();\n  const {\n    oidcClient\n  } = useOidcClient();\n  let accountUrl = `${keycloakUrl}/realms/${keycloakRealm}/account`;\n\n  // Set the language the user will get on the account page\n  accountUrl = addParamToUrl({\n    url: accountUrl,\n    name: \"kc_locale\",\n    value: \"en\"\n  }).newUrl;\n\n  // Enable to redirect to the app from the account page we'll get the referrer_uri under kcContext.referrer.url\n  // It's useful to avoid hard coding the app url in the keycloak config\n  accountUrl = addParamToUrl({\n    url: accountUrl,\n    name: \"referrer\",\n    value: keycloakClient\n  }).newUrl;\n  accountUrl = addParamToUrl({\n    url: accountUrl,\n    name: \"referrer_uri\",\n    value: window.location.href\n  }).newUrl;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [oidcClient.isUserLoggedIn ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"You are authenticated !\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: accountUrl,\n          children: \"Link to your Keycloak account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n          style: {\n            textAlign: \"left\"\n          },\n          children: JSON.stringify(jwt_decode(oidcClient.getAccessToken()), null, 2)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => oidcClient.logout({\n            redirectTo: \"home\"\n          }),\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => oidcClient.login({\n            doesCurrentHrefRequiresAuth: false\n          }),\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 29\n        }, this)\n      }, void 0, false), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: logo,\n        className: \"App-logo\",\n        alt: \"logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: myimg,\n        alt: \"test_image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          \"fontFamily\": '\"Work Sans\"'\n        },\n        children: \"Hello world\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Check out all keycloak pages in the \", /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"https://storybook.keycloakify.dev/storybook\",\n          children: \"Storybook\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 56\n        }, this), \"!\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Once you've identified the ones you want to customize run \", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"npx eject-keycloak-page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 78\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n_s(ContextualizedApp, \"hyb8L9JJPexi1yAabC4TDDUjf3M=\", false, function () {\n  return [useOidcClient];\n});\n_c2 = ContextualizedApp;\nvar _c, _c2;\n$RefreshReg$(_c, \"App\");\n$RefreshReg$(_c2, \"ContextualizedApp\");","map":{"version":3,"names":["logo","myimg","createOidcClientProvider","useOidcClient","addFooToQueryParams","addBarToQueryParams","jwt_decode","addParamToUrl","jsxDEV","_jsxDEV","Fragment","_Fragment","keycloakUrl","keycloakRealm","keycloakClient","OidcClientProvider","url","realm","clientId","getUiLocales","transformUrlBeforeRedirect","map","value","foo","log","console","App","children","ContextualizedApp","fileName","_jsxFileName","lineNumber","columnNumber","_c","_s","oidcClient","accountUrl","name","newUrl","window","location","href","className","isUserLoggedIn","style","textAlign","JSON","stringify","getAccessToken","onClick","logout","redirectTo","login","doesCurrentHrefRequiresAuth","src","alt","_c2","$RefreshReg$"],"sources":["/Users/user/NewoDev/keycloakify-starter/src/App/App.tsx"],"sourcesContent":["import \"./App.css\";\nimport logo from \"./logo.svg\";\nimport myimg from \"./myimg.png\";\nimport { createOidcClientProvider, useOidcClient } from \"./oidc\";\nimport { addFooToQueryParams, addBarToQueryParams } from \"../keycloak-theme/login/valuesTransferredOverUrl\";\nimport jwt_decode from \"jwt-decode\";\nimport { addParamToUrl } from \"powerhooks/tools/urlSearchParams\";\n\n//On older Keycloak version you need the /auth (e.g: http://localhost:8080/auth)\n//On newer version you must remove it (e.g: http://localhost:8080 )\nconst keycloakUrl = \"https://auth.code.gouv.fr/auth\";\nconst keycloakRealm = \"keycloakify\";\nconst keycloakClient= \"starter\";\n\nconst { OidcClientProvider } = createOidcClientProvider({\n    url: keycloakUrl,\n    realm: keycloakRealm,\n    clientId: keycloakClient,\n    //This function will be called just before redirecting, \n    //it should return the current langue. \n    //kcContext.locale.currentLanguageTag will be what this function returned just before redirecting.  \n    getUiLocales: () => \"en\",\n    transformUrlBeforeRedirect: url =>\n        [url]\n            //Instead of foo and bar you could have isDark for example or any other state that you wish to \n            //transfer from the main app to the login pages.\n            .map(url => addFooToQueryParams({ url, value: { foo: 42 } }))\n            .map(url => addBarToQueryParams({ url, value: \"value of bar transferred to login page\" }))\n        [0],\n    log: console.log\n});\n\nexport default function App() {\n    return (\n        <OidcClientProvider>\n            <ContextualizedApp />\n        </OidcClientProvider>\n    );\n}\n\nfunction ContextualizedApp() {\n\n    const { oidcClient } = useOidcClient();\n\n    let accountUrl = `${keycloakUrl}/realms/${keycloakRealm}/account`;\n\n    // Set the language the user will get on the account page\n    accountUrl = addParamToUrl({\n        url: accountUrl,\n        name: \"kc_locale\",\n        value: \"en\"\n    }).newUrl;\n\n    // Enable to redirect to the app from the account page we'll get the referrer_uri under kcContext.referrer.url\n    // It's useful to avoid hard coding the app url in the keycloak config\n    accountUrl = addParamToUrl({\n        url: accountUrl,\n        name: \"referrer\",\n        value: keycloakClient\n    }).newUrl;\n\n    accountUrl = addParamToUrl({\n        url: accountUrl,\n        name: \"referrer_uri\",\n        value: window.location.href\n    }).newUrl;\n\n    return (\n        <div className=\"App\">\n            <header className=\"App-header\">\n                {\n                    oidcClient.isUserLoggedIn ?\n                        <>\n                            <h1>You are authenticated !</h1>\n                            {/* On older Keycloak version its /auth/realms instead of /realms */}\n                            <a href={accountUrl}>Link to your Keycloak account</a>\n                            <pre style={{ textAlign: \"left\" }}>{JSON.stringify(jwt_decode(oidcClient.getAccessToken()), null, 2)}</pre>\n                            <button onClick={() => oidcClient.logout({ redirectTo: \"home\" })}>Logout</button>\n                        </>\n                        :\n                        <>\n                            <button onClick={() => oidcClient.login({ doesCurrentHrefRequiresAuth: false })}>Login</button>\n                        </>\n                }\n                <img src={logo} className=\"App-logo\" alt=\"logo\" />\n                <img src={myimg} alt=\"test_image\" />\n                <p style={{ \"fontFamily\": '\"Work Sans\"' }}>Hello world</p>\n                <p>Check out all keycloak pages in the <a href=\"https://storybook.keycloakify.dev/storybook\">Storybook</a>!</p>\n                <p>Once you've identified the ones you want to customize run <code>npx eject-keycloak-page</code></p>\n            </header>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}