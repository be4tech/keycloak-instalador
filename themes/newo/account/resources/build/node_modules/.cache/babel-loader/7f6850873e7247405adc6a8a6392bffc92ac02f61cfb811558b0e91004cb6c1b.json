{"ast":null,"code":"var _jsxFileName = \"/Users/user/NewoDev/keycloakify-starter/src/keycloak-theme/login/pages/Terms.tsx\",\n  _s = $RefreshSig$();\nimport { clsx } from \"keycloakify/tools/clsx\";\nimport { useRerenderOnStateChange } from \"evt/hooks\";\nimport { Markdown } from \"keycloakify/tools/Markdown\";\nimport { useGetClassName } from \"keycloakify/login/lib/useGetClassName\";\nimport { evtTermMarkdown } from \"keycloakify/login/lib/useDownloadTerms\";\nimport { useDownloadTerms } from \"keycloakify/login\";\nimport tos_en_url from \"../assets/tos_en.md\";\nimport tos_fr_url from \"../assets/tos_fr.md\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Terms(props) {\n  _s();\n  const {\n    kcContext,\n    i18n,\n    doUseDefaultCss,\n    Template,\n    classes\n  } = props;\n  const {\n    getClassName\n  } = useGetClassName({\n    doUseDefaultCss,\n    classes\n  });\n  const {\n    msg,\n    msgStr\n  } = i18n;\n\n  // NOTE: If you aren't going to customize the layout of the page you can move this hook to \n  // KcApp.tsx, see: https://docs.keycloakify.dev/terms-and-conditions\n  useDownloadTerms({\n    kcContext,\n    \"downloadTermMarkdown\": async _ref => {\n      let {\n        currentLanguageTag\n      } = _ref;\n      const tos_url = (() => {\n        switch (currentLanguageTag) {\n          case \"fr\":\n            return tos_fr_url;\n          default:\n            return tos_en_url;\n        }\n      })();\n      if (\"__STORYBOOK_ADDONS\" in window) {\n        // NOTE: In storybook, when you import a .md file you get the content of the file.\n        // In Create React App on the other hand you get an url to the file.\n        return tos_url;\n      }\n      const markdownString = await fetch(tos_url).then(response => response.text());\n      return markdownString;\n    }\n  });\n  useRerenderOnStateChange(evtTermMarkdown);\n  const {\n    url\n  } = kcContext;\n  const termMarkdown = evtTermMarkdown.state;\n  if (termMarkdown === undefined) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(Template, {\n    kcContext,\n    i18n,\n    doUseDefaultCss,\n    classes,\n    displayMessage: false,\n    headerNode: msg(\"termsTitle\"),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"kc-terms-text\",\n      children: /*#__PURE__*/_jsxDEV(Markdown, {\n        children: termMarkdown\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"form-actions\",\n      action: url.loginAction,\n      method: \"POST\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        className: clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonClass\"), getClassName(\"kcButtonClass\"), getClassName(\"kcButtonPrimaryClass\"), getClassName(\"kcButtonLargeClass\")),\n        name: \"accept\",\n        id: \"kc-accept\",\n        type: \"submit\",\n        value: msgStr(\"doAccept\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        className: clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonDefaultClass\"), getClassName(\"kcButtonLargeClass\")),\n        name: \"cancel\",\n        id: \"kc-decline\",\n        type: \"submit\",\n        value: msgStr(\"doDecline\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"clearfix\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 9\n  }, this);\n}\n_s(Terms, \"u9rGGIGBJY5okkDgGk0dj07E+Zw=\", false, function () {\n  return [useGetClassName, useDownloadTerms, useRerenderOnStateChange];\n});\n_c = Terms;\nvar _c;\n$RefreshReg$(_c, \"Terms\");","map":{"version":3,"names":["clsx","useRerenderOnStateChange","Markdown","useGetClassName","evtTermMarkdown","useDownloadTerms","tos_en_url","tos_fr_url","jsxDEV","_jsxDEV","Terms","props","_s","kcContext","i18n","doUseDefaultCss","Template","classes","getClassName","msg","msgStr","_ref","currentLanguageTag","tos_url","window","markdownString","fetch","then","response","text","url","termMarkdown","state","undefined","displayMessage","headerNode","children","id","fileName","_jsxFileName","lineNumber","columnNumber","className","action","loginAction","method","name","type","value","_c","$RefreshReg$"],"sources":["/Users/user/NewoDev/keycloakify-starter/src/keycloak-theme/login/pages/Terms.tsx"],"sourcesContent":["import { clsx } from \"keycloakify/tools/clsx\";\nimport { useRerenderOnStateChange } from \"evt/hooks\";\nimport { Markdown } from \"keycloakify/tools/Markdown\";\nimport type { PageProps } from \"keycloakify/login/pages/PageProps\";\nimport { useGetClassName } from \"keycloakify/login/lib/useGetClassName\";\nimport { evtTermMarkdown } from \"keycloakify/login/lib/useDownloadTerms\";\nimport type { KcContext } from \"../kcContext\";\nimport type { I18n } from \"../i18n\";\nimport { useDownloadTerms } from \"keycloakify/login\";\nimport tos_en_url from \"../assets/tos_en.md\";\nimport tos_fr_url from \"../assets/tos_fr.md\";\n\nexport default function Terms(props: PageProps<Extract<KcContext, { pageId: \"terms.ftl\" }>, I18n>) {\n    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;\n\n    const { getClassName } = useGetClassName({\n        doUseDefaultCss,\n        classes\n    });\n\n    const { msg, msgStr } = i18n;\n\n    // NOTE: If you aren't going to customize the layout of the page you can move this hook to \n    // KcApp.tsx, see: https://docs.keycloakify.dev/terms-and-conditions\n    useDownloadTerms({\n        kcContext,\n        \"downloadTermMarkdown\": async ({currentLanguageTag}) => {\n\n            const tos_url = (() => {\n                switch (currentLanguageTag) {\n                    case \"fr\": return tos_fr_url;\n                    default: return tos_en_url;\n                }\n            })();\n\n\n            if (\"__STORYBOOK_ADDONS\" in window) {\n                // NOTE: In storybook, when you import a .md file you get the content of the file.\n                // In Create React App on the other hand you get an url to the file.\n                return tos_url;\n            }\n\n            const markdownString = await fetch(tos_url).then(response => response.text());\n\n            return markdownString;\n\n        }\n    });\n\n    useRerenderOnStateChange(evtTermMarkdown);\n\n    const { url } = kcContext;\n\n    const termMarkdown = evtTermMarkdown.state;\n\n    if (termMarkdown === undefined) {\n        return null;\n    }\n\n    return (\n        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }} displayMessage={false} headerNode={msg(\"termsTitle\")}>\n            <div id=\"kc-terms-text\">\n                <Markdown>{termMarkdown}</Markdown>\n            </div>\n            <form className=\"form-actions\" action={url.loginAction} method=\"POST\">\n                <input\n                    className={clsx(\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonPrimaryClass\"),\n                        getClassName(\"kcButtonLargeClass\")\n                    )}\n                    name=\"accept\"\n                    id=\"kc-accept\"\n                    type=\"submit\"\n                    value={msgStr(\"doAccept\")}\n                />\n                <input\n                    className={clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonDefaultClass\"), getClassName(\"kcButtonLargeClass\"))}\n                    name=\"cancel\"\n                    id=\"kc-decline\"\n                    type=\"submit\"\n                    value={msgStr(\"doDecline\")}\n                />\n            </form>\n            <div className=\"clearfix\" />\n        </Template>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}