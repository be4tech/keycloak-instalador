{"version":3,"file":"src_keycloak-theme_login_pages_Terms_tsx.iframe.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAEA;AAEA;AAAA;AAAA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAEA;AAOA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AA7EA;AAqCA;AAAA;AArCA;AAAA","sources":["webpack://keycloakify-starter/./src/keycloak-theme/login/pages/Terms.tsx"],"sourcesContent":["import { clsx } from \"keycloakify/tools/clsx\";\nimport { useRerenderOnStateChange } from \"evt/hooks\";\nimport { Markdown } from \"keycloakify/tools/Markdown\";\nimport type { PageProps } from \"keycloakify/login/pages/PageProps\";\nimport { useGetClassName } from \"keycloakify/login/lib/useGetClassName\";\nimport { evtTermMarkdown } from \"keycloakify/login/lib/useDownloadTerms\";\nimport type { KcContext } from \"../kcContext\";\nimport type { I18n } from \"../i18n\";\nimport { useDownloadTerms } from \"keycloakify/login\";\nimport tos_en_url from \"../assets/tos_en.md\";\nimport tos_fr_url from \"../assets/tos_fr.md\";\n\nexport default function Terms(props: PageProps<Extract<KcContext, { pageId: \"terms.ftl\" }>, I18n>) {\n    const { kcContext, i18n, doUseDefaultCss, Template, classes } = props;\n\n    const { getClassName } = useGetClassName({\n        doUseDefaultCss,\n        classes\n    });\n\n    const { msg, msgStr } = i18n;\n\n    // NOTE: If you aren't going to customize the layout of the page you can move this hook to \n    // KcApp.tsx, see: https://docs.keycloakify.dev/terms-and-conditions\n    useDownloadTerms({\n        kcContext,\n        \"downloadTermMarkdown\": async ({currentLanguageTag}) => {\n\n            const tos_url = (() => {\n                switch (currentLanguageTag) {\n                    case \"fr\": return tos_fr_url;\n                    default: return tos_en_url;\n                }\n            })();\n\n\n            if (\"__STORYBOOK_ADDONS\" in window) {\n                // NOTE: In storybook, when you import a .md file you get the content of the file.\n                // In Create React App on the other hand you get an url to the file.\n                return tos_url;\n            }\n\n            const markdownString = await fetch(tos_url).then(response => response.text());\n\n            return markdownString;\n\n        }\n    });\n\n    useRerenderOnStateChange(evtTermMarkdown);\n\n    const { url } = kcContext;\n\n    const termMarkdown = evtTermMarkdown.state;\n\n    if (termMarkdown === undefined) {\n        return null;\n    }\n\n    return (\n        <Template {...{ kcContext, i18n, doUseDefaultCss, classes }} displayMessage={false} headerNode={msg(\"termsTitle\")}>\n            <div id=\"kc-terms-text\">\n                <Markdown>{termMarkdown}</Markdown>\n            </div>\n            <form className=\"form-actions\" action={url.loginAction} method=\"POST\">\n                <input\n                    className={clsx(\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonClass\"),\n                        getClassName(\"kcButtonPrimaryClass\"),\n                        getClassName(\"kcButtonLargeClass\")\n                    )}\n                    name=\"accept\"\n                    id=\"kc-accept\"\n                    type=\"submit\"\n                    value={msgStr(\"doAccept\")}\n                />\n                <input\n                    className={clsx(getClassName(\"kcButtonClass\"), getClassName(\"kcButtonDefaultClass\"), getClassName(\"kcButtonLargeClass\"))}\n                    name=\"cancel\"\n                    id=\"kc-decline\"\n                    type=\"submit\"\n                    value={msgStr(\"doDecline\")}\n                />\n            </form>\n            <div className=\"clearfix\" />\n        </Template>\n    );\n}\n"],"names":[],"sourceRoot":""}